# Task 002: Rust gRPCサーバー依存関係とビルド設定のセットアップ

## 概要

RustサーバープロジェクトにgRPC依存関係、ビルドスクリプト、ツールチェーン設定を構成します。これには、Cargo.tomlへのTonic/Prost依存関係の追加、プロトコルバッファコンパイルの設定、gRPCコード生成のためのビルド環境の準備が含まれます。

## 受け入れ基準

- [x] `server/Cargo.toml`にTonicとProst依存関係を追加
- [x] プロトコルバッファビルド依存関係を追加（tonic-prost-build）
- [x] プロトコルバッファコンパイル用の`server/build.rs`を作成
- [x] protoファイルコンパイルと出力パスを設定
- [x] 生成コードを適切に処理するよう`.gitignore`を更新（デフォルトOUT_DIRにより不要）
- [x] `cargo build`でクリーンビルドを確認
- [x] 生成コードが正常にコンパイルされることを確保

## 実装ノート

**追加する依存関係:**
```toml
# gRPC実装（最新推奨バージョン）
tonic = "0.14"
prost = "0.14"

# ビルド時依存関係
[build-dependencies]
tonic-prost-build = "0.14"
```

**ビルドスクリプトの要件:**
- `../proto/unity_mcp.proto`をコンパイル
- クライアントとサーバーコードを生成
- protoパスの解決を正しく処理
- 適切な出力ディレクトリを設定

**技術的考慮事項:**
- 既存のrmcp依存関係との互換性を確保
- 現在の非同期ランタイム（tokio）との互換性を維持
- 生成コードにRust命名規則を適用
- クロスプラットフォーム互換性のためのprotoインクルードパスを考慮

## 変更・作成するファイル

- `server/Cargo.toml` - gRPC依存関係の追加
- `server/build.rs` - プロトコルバッファビルドスクリプト
- `server/.gitignore` - 必要に応じて生成ファイルを無視

## テスト要件

- `cargo build`がエラーなく成功する
- `cargo check`がすべてのチェックを通過する
- 生成されたprotoコードが正常にコンパイルされる
- 既存の依存関係との競合がない
- 生成コード構造が期待と一致することを確認

## 依存関係

- **必要:** Task 001（プロトコルバッファサービス定義）

## ブロック対象

- Task 003: 基本的なgRPCサーバーサービススタブの実装
- Task 006: 既存MCPサーバーへのgRPCトランスポートの追加

## 実装優先度

**高優先度** - これはすべてのRust側gRPC開発を可能にする基盤セットアップタスクです。