# Task 3.9: 基本的な接続テストと検証

## 説明

実装されたgRPCサーバーの基本的な接続性と全RPCメソッドの動作を検証します。grpcurlを使用した手動テストと自動化されたテストの両方を実行します。

## 受け入れ基準

- [ ] gRPCサーバーへの基本的な接続確認
- [ ] grpcurlでの全RPCメソッドテスト（12メソッド）
- [ ] リフレクション機能の動作確認
- [ ] エラーケースの適切な処理確認
- [ ] ログ出力の確認
- [ ] パフォーマンスの基本確認
- [ ] 同時接続の基本テスト

## 実装内容

**テストスクリプト作成:**
1. **接続テスト**
   - `grpcurl -plaintext localhost:50051 list`
   - サービス一覧の確認
   - リフレクション機能の確認

2. **MCPコアメソッドテスト**
   - ListTools: `grpcurl -plaintext -d '{}' localhost:50051 unity.mcp.v1.UnityMcpService/ListTools`
   - CallTool: 基本的なツール呼び出しテスト
   - ListResources: リソース一覧テスト
   - ReadResource: ダミーリソース読み取りテスト
   - ListPrompts: プロンプト一覧テスト
   - GetPrompt: プロンプト取得テスト

3. **Unity操作メソッドテスト**
   - GetProjectInfo: プロジェクト情報取得
   - ImportAsset: アセットインポートテスト
   - MoveAsset: アセット移動テスト
   - DeleteAsset: アセット削除テスト
   - Refresh: AssetDatabase更新テスト

4. **ストリーミングテスト**
   - 基本的なストリーミング接続テスト
   - 各リクエストタイプの送信と応答確認

**エラーケーステスト:**
- 無効なリクエストの処理
- 存在しないリソース/ツール/プロンプトへのアクセス
- 不正なパラメータでの呼び出し

## 技術的考慮事項

- grpcurlの適切な使用方法
- JSONリクエスト/レスポンスの確認
- ログ出力の詳細確認
- エラーレスポンスの形式確認
- 基本的なパフォーマンス測定

## 依存関係

- **前提条件:** Task 3.8完了（サーバー統合完了）
- **外部依存:** grpcurl（テストツール）

## 完成条件

このタスクの完了により：
- Task 003の全受け入れ基準が満たされる
- gRPCサーバーの基本機能が動作確認される
- 次のタスク（Task 006等）への準備が完了する

## 検証方法

**成功基準:**
- 全12個のRPCメソッドが正常にレスポンスを返す
- エラーケースで適切なgRPCステータスコードが返される
- ログ出力でRPC呼び出しが追跡可能
- サーバーの安定動作（メモリリーク等の基本確認）
- 既存のstdio MCPサーバー機能に影響なし

**テスト環境:**
- 開発環境での手動実行
- 自動テストスクリプトの実行可能性確認

## 実装優先度

**最高優先度** - Task 003完了の最終確認